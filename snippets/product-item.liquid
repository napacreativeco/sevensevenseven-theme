{% comment %}Is this product on sale?{% endcomment %}
{% assign on_sale = false %}
{% if product.compare_at_price > product.price %}
  {% assign on_sale = true %}
{% endif %}

<li class="product-item {% unless product.available %} sold-out{% endunless %}{% if on_sale %} on-sale{% endif %}">

  <a class="product-image" href="{{ product.url | within: collection }}">
    <img src="{{ product | img_url: 'grande' }}" alt="{{ product.featured_image.alt | escape }}" />
  </a>
  
  <a class="price" href="{{ product.url | within: collection }}">
    {% if product.price_varies %}From{% endif %}
    {{ product.price | | money_without_trailing_zeros }}
    {% if on_sale %}
      <s class="compare-at-price">{{ product.compare_at_price | | money_without_trailing_zeros }}</s>
    {% endif %}
  </a>
  
</li>