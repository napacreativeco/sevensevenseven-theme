<style>
  /*
  * 
  * Mobile Nav
  *
  */
  nav.mobile {
    display: none;
    width: 100%;
    padding: 100px 20px 20px 20px;
    border-top: 2px solid var(--white);
  }
  nav.mobile ul {
    display: flex;
    flex-direction: column;
  }
  nav.mobile li {
      margin: 0 0 10px 0;
  }
  nav.mobile a {
      font-size: 12vw;
  }
  /*
  * =====================================
  * MEDIA QUERIES
  * =====================================
  */
  @media screen and (max-width: 770px) {
    nav.mobile {
      display: block;
    }
  }
</style>

<nav class="mobile">

    <ul>

    {% for link in linklists.main-menu.links %}
        {% assign has_sub_menu = false %}
        {% assign has_sub_categories = false %}
        {% assign parent_link_active = false %}
        {% assign child_list_handle = link.title | handle %}

        {% if linklists[child_list_handle] and linklists[child_list_handle].links.size > 0 %}
        {% assign has_sub_menu = true %}
        
        {% for l in linklists[child_list_handle].links %}

            {% if handle != blank and handle == l.object.handle %}
            {% assign parent_link_active = true %}
            {% elsif page_title == l.title %}
            {% assign parent_link_active = true %}
            {% endif %}

        {% endfor %}

        {% elsif link.type == 'collection_link' and link.object.all_tags.size > 0 %}

        {% comment %} REMOVED: {% assign has_sub_categories = true %} {% endcomment %}

        {% endif %}

        <li class="{% if link.active or parent_link_active %} active{% endif %}{% if has_sub_menu or has_sub_categories %} has-dropdown{% endif %}{% if forloop.first %} first{% elsif forloop.last %} last{% endif %}">
        <a href="{{ link.url }}">{{ link.title }}{% if has_sub_menu or has_sub_categories %} <i class="fa fa-angle-down"></i>{% endif %}</a> 

        {% if has_sub_menu or has_sub_categories %}

            <ul>
            {% if has_sub_menu %}
                {% for l in linklists[child_list_handle].links %}
                <li class="{% if l.active %} active{% endif %}">
                <a href="{{ l.url }}">{{ l.title }}</a>
                </li>
                {% endfor %}
            {% elsif has_sub_categories %}
                {% for tag in link.object.all_tags %}
                <li class="{% if current_tags contains tag %} active{% endif %}">
                <a href="{{ link.url }}/{{ tag | handle }}">{{ tag }}</a>
                </li>
                {% endfor %}
            {% endif %}
            </ul>

        {% endif %}

    </li>

    {% endfor %}

    <li>
      <a href="/cart" title="Cart">Cart ({{ cart.item_count }})</a>
    </li>
    
    </ul>
</nav>